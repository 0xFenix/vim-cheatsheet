<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vim Cheat Sheet Pro - Tiếng Việt Full</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Inter:wght@300;400;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #f1f5f9;
        }

        .mono {
            font-family: 'Fira Code', monospace;
        }

        /* Layout Masonry tối ưu diện tích */
        .masonry-grid {
            column-count: 1;
            column-gap: 1.5rem;
        }

        @media (min-width: 768px) {
            .masonry-grid {
                column-count: 2;
            }
        }

        @media (min-width: 1024px) {
            .masonry-grid {
                column-count: 3;
            }
        }

        .category-container {
            break-inside: avoid;
            margin-bottom: 1.5rem;
            background: #1e293b;
            border: 1px solid #334155;
            border-radius: 12px;
            overflow: hidden;
            display: inline-block;
            width: 100%;
        }

        .command-row {
            border-bottom: 1px solid #334155;
            transition: background-color 0.15s ease;
        }

        .command-row:last-child {
            border-bottom: none;
        }

        .command-row:hover {
            background-color: #2d3a4f;
        }

        .key-badge {
            background: #0f172a;
            color: #10b981;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: 600;
            border: 1px solid #334155;
            white-space: nowrap;
        }

        .category-header {
            background: #2d3a4f;
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid #334155;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a;
        }
        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }

        kbd {
            background: #334155;
            border-radius: 3px;
            padding: 1px 4px;
            font-size: 0.85em;
            color: #94a3b8;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-12">
            <div class="inline-block p-2 px-4 rounded-full bg-emerald-500/10 border border-emerald-500/20 text-emerald-400 text-sm font-semibold mb-4">
                <i class="fas fa-terminal mr-2"></i> Đồng bộ hoàn toàn từ vim.rtorr.com
            </div>
            <h1 class="text-4xl md:text-5xl font-extrabold mb-4 tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 to-blue-500 uppercase">
                Vim Cheat Sheet Việt Hóa
            </h1>
            <p class="text-slate-400 text-lg max-w-2xl mx-auto">Đầy đủ các phím tắt quan trọng. Nhấn <kbd>/</kbd> để tìm kiếm nhanh.</p>
            
            <!-- Search Area -->
            <div class="mt-8 relative max-w-2xl mx-auto">
                <div class="absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none">
                    <i class="fas fa-search text-emerald-500"></i>
                </div>
                <input type="text" id="searchInput" 
                    class="block w-full pl-14 pr-6 py-4 bg-slate-800 border border-slate-700 rounded-2xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent outline-none transition-all text-white shadow-lg"
                    placeholder="Tìm phím tắt, lệnh hoặc chức năng...">
            </div>
        </header>

        <!-- Main Display -->
        <div id="mainGrid" class="masonry-grid items-start">
            <!-- Dữ liệu được đổ từ JS -->
        </div>

        <!-- No Results -->
        <div id="noResults" class="hidden text-center py-32">
            <div class="bg-slate-800 inline-block p-8 rounded-full mb-6 border border-slate-700">
                <i class="fas fa-search text-5xl text-slate-600"></i>
            </div>
            <p class="text-slate-400 text-xl font-medium">Không tìm thấy lệnh này trong bộ nhớ</p>
        </div>

        <!-- Footer -->
        <footer class="mt-20 border-t border-slate-800 pt-8 pb-12 text-center text-slate-500 text-xs uppercase tracking-widest">
            <p>Dựa trên mã nguồn vim.rtorr.com &bull; Cập nhật đầy đủ phím di chuyển & thanh ghi</p>
        </footer>
    </div>

    <script>
        const vimData = [
            {
                category: "Toàn cục (Global)",
                icon: "fa-globe",
                color: "text-green-400",
                commands: [
                    { key: ":h[elp] keyword", desc: "Mở trợ giúp cho từ khóa", tags: "help tro giup" },
                    { key: ":sav[eas] file", desc: "Lưu file với tên mới", tags: "save as luu" },
                    { key: ":clo[se]", desc: "Đóng cửa sổ hiện tại", tags: "close dong window" },
                    { key: ":ter[minal]", desc: "Mở cửa sổ terminal", tags: "terminal console" },
                    { key: "K", desc: "Mở man page của từ dưới con trỏ", tags: "manual lookup" }
                ]
            },
            {
                category: "Di chuyển (Movement)",
                icon: "fa-arrows-alt",
                color: "text-blue-400",
                commands: [
                    { key: "h j k l", desc: "Trái, Xuống, Lên, Phải", tags: "move directional" },
                    { key: "gj / gk", desc: "Di chuyển xuống/lên trong văn bản dài (multi-line)", tags: "wrapped lines" },
                    { key: "w / W", desc: "Đến đầu từ kế tiếp (W bỏ qua dấu câu)", tags: "word jump" },
                    { key: "e / E", desc: "Đến cuối từ kế tiếp (E bỏ qua dấu câu)", tags: "end word" },
                    { key: "b / B", desc: "Lùi lại đầu từ (B bỏ qua dấu câu)", tags: "back word" },
                    { key: "ge / gE", desc: "Lùi lại cuối từ trước đó", tags: "backward end" },
                    { key: "0 / ^", desc: "Về đầu dòng / Ký tự đầu tiên không trống", tags: "line start" },
                    { key: "$ / g_", desc: "Về cuối dòng / Ký tự cuối không trống", tags: "line end" },
                    { key: "gg / G", desc: "Về đầu file / Cuối file", tags: "top bottom" },
                    { key: "5gg / 5G", desc: "Đến dòng số 5", tags: "line jump" },
                    { key: "gd / gD", desc: "Đến khai báo cục bộ / toàn cục", tags: "declaration" },
                    { key: "fx / tx", desc: "Tìm ký tự 'x' tiếp theo / dừng ngay trước đó", tags: "find char" },
                    { key: "Fx / Tx", desc: "Tìm ký tự 'x' ngược lại / dừng ngay sau đó", tags: "find backward" },
                    { key: "; / ,", desc: "Lặp lại lệnh tìm f/t theo hướng xuôi/ngược", tags: "repeat find" },
                    { key: "} / {", desc: "Đến đoạn (paragraph) tiếp theo / trước đó", tags: "jump block" },
                    { key: "H / M / L", desc: "Đầu / Giữa / Cuối màn hình hiện tại", tags: "screen position" },
                    { key: "%", desc: "Nhảy tới dấu ngoặc đối xứng (), {}, []", tags: "matching bracket" }
                ]
            },
            {
                category: "Chế độ Chèn (Insert Mode)",
                icon: "fa-keyboard",
                color: "text-emerald-400",
                commands: [
                    { key: "i / I", desc: "Chèn trước con trỏ / đầu dòng", tags: "insert" },
                    { key: "a / A", desc: "Chèn sau con trỏ / cuối dòng", tags: "append" },
                    { key: "o / O", desc: "Dòng mới phía dưới / phía trên", tags: "open line" },
                    { key: "ea", desc: "Chèn vào cuối từ hiện tại", tags: "append word end" },
                    { key: "Ctrl + h/w", desc: "Xóa ký tự / Xóa từ trước con trỏ", tags: "delete insert" },
                    { key: "Ctrl + j", desc: "Thêm ngắt dòng (line break)", tags: "new line" },
                    { key: "Ctrl + t/d", desc: "Thụt lề vào / Thụt lề ra", tags: "indent" },
                    { key: "Ctrl + n/p", desc: "Gợi ý từ tiếp theo / trước đó", tags: "autocomplete" },
                    { key: "Esc / Ctrl+c", desc: "Thoát chế độ chèn", tags: "exit insert" }
                ]
            },
            {
                category: "Chỉnh sửa (Editing)",
                icon: "fa-edit",
                color: "text-purple-400",
                commands: [
                    { key: "r / R", desc: "Thay 1 ký tự / Chế độ thay thế (Replace)", tags: "replace" },
                    { key: "J / gJ", desc: "Nối dòng dưới lên (có/không khoảng cách)", tags: "join lines" },
                    { key: "cc / C", desc: "Sửa toàn bộ dòng / từ con trỏ đến cuối dòng", tags: "change" },
                    { key: "ciw / cw", desc: "Sửa toàn bộ từ / sửa đến cuối từ", tags: "change word" },
                    { key: "s / S", desc: "Xóa ký tự và chèn / Xóa dòng và chèn", tags: "substitute" },
                    { key: "u / U", desc: "Hoàn tác (Undo) / Khôi phục dòng cuối", tags: "undo" },
                    { key: "Ctrl + r", desc: "Làm lại (Redo)", tags: "redo" },
                    { key: ".", desc: "Lặp lại lệnh cuối cùng", tags: "repeat" },
                    { key: "gu / gU", desc: "Chuyển thành chữ thường / chữ hoa", tags: "lowercase uppercase" }
                ]
            },
            {
                category: "Visual Mode & Cắt/Dán",
                icon: "fa-copy",
                color: "text-pink-400",
                commands: [
                    { key: "v / V", desc: "Chọn theo ký tự / Chọn theo dòng", tags: "visual" },
                    { key: "Ctrl + v", desc: "Chọn khối dọc (Visual Block)", tags: "visual block" },
                    { key: "aw / iw", desc: "Chọn toàn bộ từ / chọn trong từ", tags: "text object" },
                    { key: "yy / 2yy", desc: "Copy (yank) 1 dòng / 2 dòng", tags: "copy" },
                    { key: "yw / yiw", desc: "Copy từ / Copy toàn bộ từ dưới con trỏ", tags: "copy word" },
                    { key: "p / P", desc: "Dán sau / trước con trỏ", tags: "paste" },
                    { key: "dd / dw", desc: "Xóa (cắt) dòng / từ", tags: "delete cut" },
                    { key: "D / x", desc: "Xóa đến hết dòng / Xóa ký tự hiện tại", tags: "delete" }
                ]
            },
            {
                category: "Thanh ghi (Registers)",
                icon: "fa-memory",
                color: "text-yellow-400",
                commands: [
                    { key: ":reg", desc: "Hiển thị nội dung các thanh ghi", tags: "registers list" },
                    { key: '\"xy', desc: "Copy vào thanh ghi x", tags: "yank register" },
                    { key: '\"xp', desc: "Dán từ thanh ghi x", tags: "paste register" },
                    { key: '\"+y', desc: "Copy vào Clipboard hệ thống", tags: "system clipboard" },
                    { key: '\"+p', desc: "Dán từ Clipboard hệ thống", tags: "system paste" }
                ]
            },
            {
                category: "Dấu & Vị trí (Marks)",
                icon: "fa-bookmark",
                color: "text-indigo-400",
                commands: [
                    { key: ":marks", desc: "Danh sách các điểm đã đánh dấu", tags: "marks list" },
                    { key: "ma", desc: "Đánh dấu vị trí hiện tại là 'a'", tags: "set mark" },
                    { key: "`a", desc: "Nhảy đến vị trí 'a'", tags: "jump mark" },
                    { key: "``", desc: "Nhảy về vị trí trước lần nhảy cuối", tags: "jump back" },
                    { key: "Ctrl + o/i", desc: "Về vị trí cũ / mới trong Jump list", tags: "history jump" }
                ]
            },
            {
                category: "Nhiều File & Cửa sổ",
                icon: "fa-clone",
                color: "text-cyan-400",
                commands: [
                    { key: ":e file", desc: "Mở file vào buffer mới", tags: "edit file" },
                    { key: ":bn / :bp", desc: "Đến buffer tiếp theo / trước đó", tags: "buffer next" },
                    { key: ":sp / :vs", desc: "Chia cửa sổ ngang / dọc", tags: "split window" },
                    { key: "Ctrl + w w", desc: "Chuyển đổi giữa các cửa sổ", tags: "switch window" },
                    { key: "Ctrl + w h/j/k/l", desc: "Nhảy sang cửa sổ Trái/Dưới/Trên/Phải", tags: "move window" },
                    { key: "gt / gT", desc: "Đến Tab tiếp theo / trước đó", tags: "tab next" }
                ]
            },
            {
                category: "Tìm kiếm & Thay thế",
                icon: "fa-search",
                color: "text-orange-400",
                commands: [
                    { key: "/pattern", desc: "Tìm kiếm xuôi theo mẫu", tags: "search" },
                    { key: "?pattern", desc: "Tìm kiếm ngược theo mẫu", tags: "search backward" },
                    { key: "n / N", desc: "Kết quả kế tiếp / trước đó", tags: "next match" },
                    { key: ":%s/old/new/g", desc: "Thay thế toàn bộ trong file", tags: "replace all" },
                    { key: ":%s/old/new/gc", desc: "Thay thế có xác nhận", tags: "confirm replace" },
                    { key: ":noh", desc: "Tắt highlight kết quả tìm kiếm", tags: "no highlight" }
                ]
            }
        ];

        const mainGrid = document.getElementById('mainGrid');
        const searchInput = document.getElementById('searchInput');
        const noResults = document.getElementById('noResults');

        function cleanString(str) {
            return str.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/đ/g, "d");
        }

        function render(dataFilter = "") {
            const filter = cleanString(dataFilter);
            mainGrid.innerHTML = "";
            let totalFound = 0;

            vimData.forEach(cat => {
                const filteredCommands = cat.commands.filter(cmd => 
                    cleanString(cmd.key).includes(filter) || 
                    cleanString(cmd.desc).includes(filter) ||
                    cleanString(cmd.tags).includes(filter)
                );

                if (filteredCommands.length > 0) {
                    totalFound += filteredCommands.length;
                    const container = document.createElement('div');
                    container.className = "category-container";
                    container.innerHTML = `
                        <div class="category-header">
                            <i class="fas ${cat.icon} ${cat.color} w-5 text-center"></i>
                            <h2 class="font-bold text-slate-200 text-sm uppercase tracking-wider">${cat.category}</h2>
                        </div>
                        <div class="flex flex-col">
                            ${filteredCommands.map(cmd => `
                                <div class="command-row p-3 flex justify-between items-center gap-3">
                                    <span class="text-slate-300 text-xs md:text-sm leading-snug">${cmd.desc}</span>
                                    <span class="key-badge mono text-[10px] md:text-xs">${cmd.key}</span>
                                </div>
                            `).join('')}
                        </div>
                    `;
                    mainGrid.appendChild(container);
                }
            });
            noResults.classList.toggle('hidden', totalFound > 0);
        }

        searchInput.addEventListener('input', (e) => render(e.target.value));
        window.addEventListener('keydown', (e) => {
            if (e.key === '/' && document.activeElement !== searchInput) {
                e.preventDefault(); searchInput.focus();
            }
        });
        render();
    </script>
</body>
</html>
